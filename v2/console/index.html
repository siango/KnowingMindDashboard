<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>KnowingMind Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="assets/css/style.css?v=20250913-103847">
</head>
<body>
  <header class="app-header">
    <div class="brand">KnowingMind Dashboard</div>
    <div class="meta"><span id="version">v-20250913-103847</span></div>
  </header>

  <div class="app">
    <aside class="sidebar">
      <nav>
        <a href="#/overview" class="nav-link">Overview</a>
        <a href="#/analytics" class="nav-link">Analytics</a>
        <a href="#/checklist" class="nav-link">Checklist</a>
        <a href="#/tasks" class="nav-link">Tasks</a>
        <a href="#/devices" class="nav-link">Devices</a>
        <a href="#/commands" class="nav-link">Commands</a>
      </nav>
    </aside>
    <main id="content"><div class="loading">Loading...</div></main>
  </div>

  <footer class="app-footer">
    <small>© KnowingMindSuite — refreshed at 20250913-103847</small>
  </footer>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.getRegistrations()
        .then(rs => Promise.all(rs.map(r => r.unregister()))).catch(()=>{});
    }
    window.KM_VER="20250913-103847";
    window.KM_BOOTED=false;
  </script>
  <script src="assets/js/app.js?v=20250913-103847"></script>
  <script>
    (function(){
      function esc(s){return String(s).replace(/[&<>\"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;', "'":'&#39;'}[c]));}
      setTimeout(function(){
        if(!window.KM_BOOTED){
          var el=document.getElementById('content');
          el.innerHTML="<div class='card'><h3>Recovery mode</h3><p class='muted'>Main script didn't boot; loading Overview directly…</p></div>";
          fetch('tabs/overview.html?v='+(window.KM_VER||'x'),{cache:'no-store'})
            .then(r=>r.ok?r.text():Promise.reject('HTTP '+r.status))
            .then(html=>{ el.innerHTML=html; })
            .catch(err=>{ el.innerHTML="<div class='card'><h3>Load error</h3><pre>"+esc(err)+"</pre></div>"; });
        }
      },1200);
    })();
  </script>
</body>
</html>
